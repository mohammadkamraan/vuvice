(function(s,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(s=typeof globalThis<"u"?globalThis:s||self,t(s.vuvice={},s.Vue))})(this,function(s,t){"use strict";var _=Object.defineProperty;var U=(s,t,r)=>t in s?_(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var l=(s,t,r)=>(U(s,typeof t!="symbol"?t+"":t,r),r);const r=new Set,o=new Map;function b(){const u=t.ref();let e=null;function i(n){e=n}const a=t.computed(()=>u.value);function f(n){if(!r.has(n)){let c=function(h){u.value=h};o.set(n,c),e==null||e.attach(c)}r.add(n)}function d(n){const c=o.get(n);c&&(e==null||e.detach(c),o.delete(n))}return{getValue:a,attach:f,detach:d,setObserver:i,updaters:o}}function v(u,e){return function(a,f,d){const n=b();function c(h){return n.setObserver(this[u]),n.attach(h),{value:n.updaters.has(h)?e(n.getValue.value):this[u].getValue(),unSubscribe:n.detach}}d.value=c}}function S(){const u=t.getCurrentInstance();return{uuId:u==null?void 0:u.uid.toString()}}function p(u){const e=t.ref(u.getValue());function i(f){e.value=f}const a=t.computed(()=>e.value);return t.onBeforeMount(()=>{u.attach(i)}),t.onBeforeUnmount(()=>{u.detach(i)}),{getValue:a}}class y{constructor(e){l(this,"_value");l(this,"observers",[]);this.next(e)}attach(e){this.observers.push(e)}detach(e){this.observers=this.observers.filter(i=>i!==e)}notify(){for(const e of this.observers)typeof e=="function"?e(this._value):e.update(this._value)}next(e){typeof e=="function"?this._value=e(this._value):this._value=e,this.notify()}getValue(){return this._value}}class g{constructor(){l(this,"observers",[])}attach(e){this.observers.push(e)}detach(e){this.observers=this.observers.filter(i=>i!==e)}notify(){for(const e of this.observers)e.update(this)}}s.AbstractSubject=g,s.BehaviorSubject=y,s.UiSync=v,s.useComponentId=S,s.useSubscribe=p,s.useUiSync=b,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
